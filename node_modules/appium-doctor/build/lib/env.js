"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _appiumSupport = require("appium-support");

var _doctor = require("./doctor");

var _utils = require("./utils");

require("@colors/colors");

class EnvVarAndPathCheck extends _doctor.DoctorCheck {
  constructor(varName) {
    super();
    this.varName = varName;
  }

  async diagnose() {
    let varValue = process.env[this.varName];

    if (typeof varValue === 'undefined') {
      return (0, _utils.nok)(`${this.varName} environment variable is NOT set!`);
    }

    return (await _appiumSupport.fs.exists(varValue)) ? (0, _utils.ok)(`${this.varName} is set to: ${varValue}`) : (0, _utils.nok)(`${this.varName} is set to '${varValue}' but this is NOT a valid path!`);
  }

  fix() {
    return `Make sure the environment variable ${this.varName.bold} is properly configured for the Appium process. ` + `Refer https://github.com/appium/java-client/blob/master/docs/environment.md for more details.`;
  }

}

var _default = EnvVarAndPathCheck;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliL2Vudi5qcyIsIm5hbWVzIjpbIkVudlZhckFuZFBhdGhDaGVjayIsIkRvY3RvckNoZWNrIiwiY29uc3RydWN0b3IiLCJ2YXJOYW1lIiwiZGlhZ25vc2UiLCJ2YXJWYWx1ZSIsInByb2Nlc3MiLCJlbnYiLCJub2siLCJmcyIsImV4aXN0cyIsIm9rIiwiZml4IiwiYm9sZCJdLCJzb3VyY2VSb290IjoiLi4vLi4iLCJzb3VyY2VzIjpbImxpYi9lbnYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZnMgfSBmcm9tICdhcHBpdW0tc3VwcG9ydCc7XG5pbXBvcnQgeyBEb2N0b3JDaGVjayB9IGZyb20gJy4vZG9jdG9yJztcbmltcG9ydCB7IG9rLCBub2sgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCAnQGNvbG9ycy9jb2xvcnMnO1xuXG4vLyBDaGVjayBlbnYgdmFyaWFibGVzXG5jbGFzcyBFbnZWYXJBbmRQYXRoQ2hlY2sgZXh0ZW5kcyBEb2N0b3JDaGVjayB7XG4gIGNvbnN0cnVjdG9yICh2YXJOYW1lKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnZhck5hbWUgPSB2YXJOYW1lO1xuICB9XG5cbiAgYXN5bmMgZGlhZ25vc2UgKCkge1xuICAgIGxldCB2YXJWYWx1ZSA9IHByb2Nlc3MuZW52W3RoaXMudmFyTmFtZV07XG4gICAgaWYgKHR5cGVvZiB2YXJWYWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiBub2soYCR7dGhpcy52YXJOYW1lfSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBOT1Qgc2V0IWApO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgZnMuZXhpc3RzKHZhclZhbHVlKSA/IG9rKGAke3RoaXMudmFyTmFtZX0gaXMgc2V0IHRvOiAke3ZhclZhbHVlfWApIDpcbiAgICAgIG5vayhgJHt0aGlzLnZhck5hbWV9IGlzIHNldCB0byAnJHt2YXJWYWx1ZX0nIGJ1dCB0aGlzIGlzIE5PVCBhIHZhbGlkIHBhdGghYCk7XG4gIH1cblxuICBmaXggKCkge1xuICAgIHJldHVybiBgTWFrZSBzdXJlIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSAke3RoaXMudmFyTmFtZS5ib2xkfSBpcyBwcm9wZXJseSBjb25maWd1cmVkIGZvciB0aGUgQXBwaXVtIHByb2Nlc3MuIGAgK1xuICAgICAgYFJlZmVyIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vamF2YS1jbGllbnQvYmxvYi9tYXN0ZXIvZG9jcy9lbnZpcm9ubWVudC5tZCBmb3IgbW9yZSBkZXRhaWxzLmA7XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBFbnZWYXJBbmRQYXRoQ2hlY2s7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUdBLE1BQU1BLGtCQUFOLFNBQWlDQyxtQkFBakMsQ0FBNkM7RUFDM0NDLFdBQVcsQ0FBRUMsT0FBRixFQUFXO0lBQ3BCO0lBQ0EsS0FBS0EsT0FBTCxHQUFlQSxPQUFmO0VBQ0Q7O0VBRWEsTUFBUkMsUUFBUSxHQUFJO0lBQ2hCLElBQUlDLFFBQVEsR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVksS0FBS0osT0FBakIsQ0FBZjs7SUFDQSxJQUFJLE9BQU9FLFFBQVAsS0FBb0IsV0FBeEIsRUFBcUM7TUFDbkMsT0FBTyxJQUFBRyxVQUFBLEVBQUssR0FBRSxLQUFLTCxPQUFRLG1DQUFwQixDQUFQO0lBQ0Q7O0lBQ0QsT0FBTyxPQUFNTSxpQkFBQSxDQUFHQyxNQUFILENBQVVMLFFBQVYsQ0FBTixJQUE0QixJQUFBTSxTQUFBLEVBQUksR0FBRSxLQUFLUixPQUFRLGVBQWNFLFFBQVMsRUFBMUMsQ0FBNUIsR0FDTCxJQUFBRyxVQUFBLEVBQUssR0FBRSxLQUFLTCxPQUFRLGVBQWNFLFFBQVMsaUNBQTNDLENBREY7RUFFRDs7RUFFRE8sR0FBRyxHQUFJO0lBQ0wsT0FBUSxzQ0FBcUMsS0FBS1QsT0FBTCxDQUFhVSxJQUFLLGtEQUF4RCxHQUNKLCtGQURIO0VBRUQ7O0FBbEIwQzs7ZUFzQjlCYixrQiJ9
